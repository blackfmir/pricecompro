{% extends "base.html" %}{% block content %}
<h1 class="text-xl font-semibold mb-3">Import for: {{ pl.name }} (ID {{ pl.id }})</h1>
<form method="post" enctype="multipart/form-data" class="bg-white p-4 rounded-xl shadow flex gap-3 items-center">
  <input type="file" name="file" required class="border px-3 py-2 rounded bg-white">
  <button class="px-4 py-2 bg-green-600 text-white rounded">Upload & Import</button>
</form>
{% if stats %}<div class="mt-4 bg-white p-3 rounded-xl shadow">Inserted: <b>{{ stats.inserted }}</b>, Updated: <b>{{ stats.updated }}</b></div>{% endif %}
{% if errors and errors|length %}<div class="mt-3 bg-red-50 border border-red-200 text-red-700 p-3 rounded"><div class="font-semibold">Errors</div><ul class="list-disc ml-6">{% for e in errors %}<li>{{ e }}</li>{% endfor %}</ul></div>{% endif %}
{% if preview and preview|length %}
<h2 class="text-lg font-semibold mt-4 mb-2">Preview (first {{ preview|length }})</h2>
<div class="overflow-x-auto bg-white rounded-xl shadow"><table class="min-w-full"><thead class="bg-slate-100"><tr><th class="p-2 text-left">supplier_sku</th><th class="p-2 text-left">name</th><th class="p-2 text-left">price_raw</th><th class="p-2 text-left">currency</th><th class="p-2 text-left">qty</th></tr></thead>
<tbody>{% for p in preview %}<tr class="border-t"><td class="p-2">{{ p.supplier_sku }}</td><td class="p-2">{{ p.name }}</td><td class="p-2">{{ p.price_raw }}</td><td class="p-2">{{ p.currency_raw }}</td><td class="p-2">{{ p.qty_raw }}</td></tr>{% endfor %}</tbody></table></div>
{% endif %}
{% endblock %}
